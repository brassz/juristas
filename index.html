<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestão - XPCRED</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .sidebar {
            transition: all 0.3s;
        }
        .content-area {
            transition: all 0.3s;
        }
        .dashboard-card {
            transition: transform 0.2s;
        }
        .dashboard-card:hover {
            transform: translateY(-5px);
        }
        .modal {
            animation: fadeIn 0.3s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .file-upload-area {
            border: 2px dashed #d1d5db;
            transition: all 0.3s;
        }
        .file-upload-area:hover {
            border-color: #3b82f6;
            background-color: #f8fafc;
        }
        .file-upload-area.dragover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <div class="sidebar bg-blue-800 text-white w-64 flex-shrink-0">
            <div class="p-4 flex items-center space-x-2">
                <i class="fas fa-balance-scale text-2xl"></i>
                <h1 class="text-xl font-bold">XPCRED</h1>
            </div>
            <nav class="mt-6">
                <div class="px-4 py-2 text-sm font-medium text-blue-200">GESTÃO</div>
                <a href="#" class="block px-4 py-2 text-white hover:bg-blue-700 transition active-dashboard">
                    <i class="fas fa-chart-line mr-2"></i> Dashboard
                </a>
                <a href="#" class="block px-4 py-2 text-white hover:bg-blue-700 transition active-clients">
                    <i class="fas fa-users mr-2"></i> Clientes
                </a>
                <a href="#" class="block px-4 py-2 text-white hover:bg-blue-700 transition active-loans">
                    <i class="fas fa-hand-holding-usd mr-2"></i> Empréstimos
                </a>
                <a href="#" class="block px-4 py-2 text-white hover:bg-blue-700 transition active-cash">
                    <i class="fas fa-wallet mr-2"></i> Caixa
                </a>
                <a href="#" class="block px-4 py-2 text-white hover:bg-blue-700 transition active-installments">
                    <i class="fas fa-credit-card mr-2"></i> Parcelamento
                </a>
            </nav>

        </div>

        <!-- Main Content -->
        <div class="content-area flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-white border-b border-gray-200 p-4 flex justify-between items-center">
                <h2 class="text-xl font-semibold text-gray-800 section-title">Dashboard</h2>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" placeholder="Pesquisar..." class="pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                </div>
            </header>

            <!-- Dynamic Content -->
            <main class="flex-1 overflow-auto p-6 bg-gray-50">
                <!-- Dashboard Section -->
                <section id="dashboard-section" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="dashboard-card bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <div class="flex justify-between items-start">
                                <div>
                                    <div class="text-sm text-gray-500">Valor em Caixa</div>
                                    <div class="text-3xl font-bold mt-1 cash-balance">R$ 0,00</div>
                                </div>
                                <div class="bg-green-100 text-green-800 p-2 rounded-lg">
                                    <i class="fas fa-coins"></i>
                                </div>
                            </div>
                            <div class="mt-4 text-sm text-gray-500">
                                <span>Total disponível para empréstimos</span>
                            </div>
                        </div>
                        
                        <div class="dashboard-card bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <div class="flex justify-between items-start">
                                <div>
                                    <div class="text-sm text-gray-500">Valor a Receber</div>
                                    <div class="text-3xl font-bold mt-1 total-receivable">R$ 0,00</div>
                                </div>
                                <div class="bg-blue-100 text-blue-800 p-2 rounded-lg">
                                    <i class="fas fa-hand-holding-usd"></i>
                                </div>
                            </div>
                            <div class="mt-4 text-sm text-gray-500">
                                <span>Total de empréstimos ativos</span>
                            </div>
                        </div>
                        
                        <div class="dashboard-card bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <div class="flex justify-between items-start">
                                <div>
                                    <div class="text-sm text-gray-500">Total de Clientes</div>
                                    <div class="text-3xl font-bold mt-1 total-clients">0</div>
                                </div>
                                <div class="bg-purple-100 text-purple-800 p-2 rounded-lg">
                                    <i class="fas fa-users"></i>
                                </div>
                            </div>
                            <div class="mt-4 text-sm text-gray-500">
                                <span>Clientes cadastrados no sistema</span>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-semibold text-gray-800">Últimos Empréstimos</h3>
                                <a href="#" class="text-sm text-blue-600 hover:text-blue-800">Ver todos</a>
                            </div>
                            <div class="space-y-4 recent-loans">
                                <div class="text-center text-gray-500 py-4">Nenhum empréstimo recente</div>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-semibold text-gray-800">Resumo Financeiro</h3>
                                <div class="relative">
                                    <select class="appearance-none bg-gray-100 border-0 pl-3 pr-8 py-1 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <option>Este Mês</option>
                                        <option>Mês Passado</option>
                                        <option>Este Ano</option>
                                    </select>
                                    <i class="fas fa-chevron-down absolute right-2 top-2 text-gray-400 pointer-events-none"></i>
                                </div>
                            </div>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Empréstimos realizados:</span>
                                    <span class="font-medium loans-made">0</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Juros recebidos:</span>
                                    <span class="font-medium text-green-600 interest-received">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-600">Taxa média:</span>
                                    <span class="font-medium average-rate">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Seção de Gráficos -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Gráfico de Clientes Criados -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-semibold text-gray-800">Clientes Criados</h3>
                                <div class="relative">
                                    <select id="clients-chart-period" class="appearance-none bg-gray-100 border-0 pl-3 pr-8 py-1 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                                        <option value="6">Últimos 6 meses</option>
                                        <option value="12">Últimos 12 meses</option>
                                        <option value="24">Últimos 24 meses</option>
                                    </select>
                                    <i class="fas fa-chevron-down absolute right-2 top-2 text-gray-400 pointer-events-none"></i>
                                </div>
                            </div>
                            <div class="h-64">
                                <canvas id="clients-chart"></canvas>
                            </div>
                        </div>

                        <!-- Gráfico de Lucro por Juros -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-semibold text-gray-800">Lucro por Juros</h3>
                                <div class="relative">
                                    <select id="profit-chart-period" class="appearance-none bg-gray-100 border-0 pl-3 pr-8 py-1 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                                        <option value="6">Últimos 6 meses</option>
                                        <option value="12">Últimos 12 meses</option>
                                        <option value="24">Últimos 24 meses</option>
                                    </select>
                                    <i class="fas fa-chevron-down absolute right-2 top-2 text-gray-400 pointer-events-none"></i>
                                </div>
                            </div>
                            <div class="h-64">
                                <canvas id="profit-chart"></canvas>
                            </div>
                        </div>

                        <!-- Gráfico de Total Emprestado -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-semibold text-gray-800">Total Emprestado</h3>
                                <div class="relative">
                                    <select id="loans-chart-period" class="appearance-none bg-gray-100 border-0 pl-3 pr-8 py-1 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                                        <option value="6">Últimos 6 meses</option>
                                        <option value="12">Últimos 12 meses</option>
                                        <option value="24">Últimos 24 meses</option>
                                    </select>
                                    <i class="fas fa-chevron-down absolute right-2 top-2 text-gray-400 pointer-events-none"></i>
                                </div>
                            </div>
                            <div class="h-64">
                                <canvas id="loans-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Clients Section -->
                <section id="clients-section" class="hidden">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
                        <div class="border-b border-gray-200 p-4 flex justify-between items-center">
                            <h3 class="font-semibold text-gray-800">Gestão de Clientes</h3>
                            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center" onclick="openClientModal()">
                                <i class="fas fa-plus mr-2"></i> Novo Cliente
                            </button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">CPF</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Telefone</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Endereço</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Documentos</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200 clients-list">
                                    <tr>
                                        <td colspan="7" class="px-6 py-4 text-center text-gray-500">Nenhum cliente cadastrado</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Loans Section -->
                <section id="loans-section" class="hidden">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
                        <div class="border-b border-gray-200 p-4 flex justify-between items-center">
                            <h3 class="font-semibold text-gray-800">Gestão de Empréstimos</h3>
                            <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center" onclick="openLoanModal()">
                                <i class="fas fa-plus mr-2"></i> Novo Empréstimo
                            </button>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Taxa (%)</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor Final</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data do Empréstimo</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data de Pagamento</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200 loans-list">
                                    <tr>
                                        <td colspan="8" class="px-6 py-4 text-center text-gray-500">Nenhum empréstimo cadastrado</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Cash Section -->
                <section id="cash-section" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <h3 class="font-semibold text-gray-800 mb-4">Caixa</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center p-4 bg-gray-50 rounded-lg">
                                    <div>
                                        <div class="font-medium">Saldo Disponível</div>
                                        <div class="text-gray-500 text-sm">Dinheiro disponível para empréstimos</div>
                                    </div>
                                    <div class="text-2xl font-bold cash-available">R$ 0,00</div>
                                </div>
                                <button class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition flex items-center justify-center" onclick="openCashModal('income')">
                                    <i class="fas fa-plus-circle mr-2"></i> Adicionar ao Caixa
                                </button>
                                <button class="w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition flex items-center justify-center" onclick="openCashModal('expense')">
                                    <i class="fas fa-minus-circle mr-2"></i> Retirar do Caixa
                                </button>
                            </div>
                        </div>
                        
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                            <h3 class="font-semibold text-gray-800 mb-4">Valor a Receber</h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center p-4 bg-blue-50 rounded-lg">
                                    <div>
                                        <div class="font-medium">Total a Receber</div>
                                        <div class="text-gray-500 text-sm">Empréstimos ativos</div>
                                    </div>
                                    <div class="text-2xl font-bold text-blue-600 total-receivable-cash">R$ 0,00</div>
                                </div>
                                <div class="text-sm text-gray-600">
                                    <p>• Empréstimos em andamento</p>
                                    <p>• Juros acumulados</p>
                                    <p>• Pagamentos pendentes</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                        <h3 class="font-semibold text-gray-800 mb-4">Histórico de Movimentações</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tipo</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Descrição</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Responsável</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200 cash-history">
                                    <tr>
                                        <td colspan="5" class="px-6 py-4 text-center text-gray-500">Nenhuma movimentação registrada</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Installments Section -->
                <section id="installments-section" class="hidden">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
                                                        <div class="border-b border-gray-200 p-4 flex justify-between items-center">
                                    <h3 class="font-semibold text-gray-800">Gestão de Parcelamento - Empréstimos Vencidos</h3>
                            <div class="flex space-x-2">
                                <button class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition flex items-center" onclick="openPaymentModal()">
                                    <i class="fas fa-plus mr-2"></i> Registrar Pagamento
                                </button>
                                <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center" onclick="openInstallmentModal()">
                                    <i class="fas fa-edit mr-2"></i> Editar Parcela
                                </button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cliente</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor Original</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor Restante</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Taxa (%)</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data do Empréstimo</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vencimento</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200 installments-list">
                                    <tr>
                                        <td colspan="8" class="px-6 py-4 text-center text-gray-500">Nenhum empréstimo ativo para parcelamento</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Client Modal -->
    <div id="client-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="border-b border-gray-200 p-4 flex justify-between items-center">
                <h3 class="font-semibold text-gray-800" id="client-modal-title">Novo Cliente</h3>
                <button onclick="closeClientModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="client-form" class="p-4 space-y-4">
                <input type="hidden" id="client-id">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nome Completo *</label>
                        <input type="text" id="client-name" required class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">CPF *</label>
                        <input type="text" id="client-cpf" required class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="000.000.000-00">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                        <input type="email" id="client-email" required class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Telefone *</label>
                        <input type="tel" id="client-phone" required class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="(00) 00000-0000">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Endereço Completo *</label>
                    <textarea id="client-address" required rows="3" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Documentos</label>
                    <div class="file-upload-area p-6 rounded-lg text-center cursor-pointer" onclick="openUploadcare()">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
                        <p class="text-gray-700 font-medium mb-2">Clique para anexar documentos</p>
                        <p class="text-gray-600 text-sm mb-1">CNH, RG, Carteira de Trabalho, Contratos, etc.</p>
                        <p class="text-xs text-gray-500">Formatos aceitos: PDF, JPG, JPEG, PNG</p>
                        <p class="text-xs text-gray-400 mt-2">Arraste arquivos aqui ou clique para selecionar</p>
                    </div>
                    <!-- Input hidden para o Uploadcare -->
                    <input type="hidden" role="uploadcare-uploader" data-public-key="5bb6bf6b98f6d36060dc" data-multiple="true" data-multiple-max="10" data-multiple-min="1" data-locale="pt" data-preferred-types="image/*,application/pdf" data-image-preview-max-size="10485760" data-image-shrink="1024x1024" data-clearable="true" data-tabs="file url gdrive dropbox onedrive" data-input-accept-types=".pdf,.jpg,.jpeg,.png,.gif,.bmp,.tiff" />
                    <div id="uploaded-documents" class="mt-3 space-y-2"></div>
                </div>
                <div class="pt-2 flex space-x-3">
                    <button type="submit" class="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition">
                        Salvar Cliente
                    </button>
                    <button type="button" onclick="closeClientModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Documents Modal -->
    <div id="documents-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="border-b border-gray-200 p-4 flex justify-between items-center">
                <h3 class="font-semibold text-gray-800" id="documents-modal-title">Documentos do Cliente</h3>
                <button onclick="closeDocumentsModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-4">
                <div id="documents-list" class="space-y-4">
                    <!-- Documentos serão renderizados aqui -->
                </div>
            </div>
        </div>
    </div>

    <!-- Loan Modal -->
    <div id="loan-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="border-b border-gray-200 p-4 flex justify-between items-center">
                <h3 class="font-semibold text-gray-800" id="loan-modal-title">Novo Empréstimo</h3>
                <button onclick="closeLoanModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="loan-form" class="p-4 space-y-4">
                <input type="hidden" id="loan-id">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Cliente *</label>
                        <select id="loan-client" required class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Selecione um cliente</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Data do Empréstimo *</label>
                        <input type="date" id="loan-date" required class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Data de Pagamento *</label>
                        <input type="date" id="loan-due-date" required class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Valor a Emprestar *</label>
                        <input type="number" id="loan-amount" required step="0.01" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="R$ 0,00">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Taxa de Juros (%) *</label>
                        <input type="number" id="loan-rate" required step="0.01" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="0.00">
                    </div>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg">
                    <div class="flex justify-between items-center">
                        <span class="font-medium text-blue-800">Valor Final com Juros:</span>
                        <span class="text-2xl font-bold text-blue-600" id="loan-final-amount">R$ 0,00</span>
                    </div>
                    <div class="text-sm text-blue-600 mt-1">
                        <span id="loan-interest-amount">Juros: R$ 0,00</span>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Observações</label>
                    <textarea id="loan-notes" rows="3" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Observações sobre o empréstimo..."></textarea>
                </div>
                <div class="pt-2 flex space-x-3">
                    <button type="submit" class="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition">
                        Criar Empréstimo
                    </button>
                    <button type="button" onclick="closeLoanModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Cash Modal -->
    <div id="cash-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-md">
            <div class="border-b border-gray-200 p-4 flex justify-between items-center">
                <h3 class="font-semibold text-gray-800" id="cash-modal-title">Movimentação de Caixa</h3>
                <button onclick="closeCashModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="cash-form" class="p-4 space-y-4">
                <input type="hidden" id="cash-type">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Valor *</label>
                    <input type="number" id="cash-amount" required step="0.01" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="R$ 0,00">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Descrição *</label>
                    <input type="text" id="cash-description" required class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Data *</label>
                    <input type="date" id="cash-date" required class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div class="pt-2 flex space-x-3">
                    <button type="submit" class="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition">
                        Confirmar
                    </button>
                    <button type="button" onclick="closeCashModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="payment-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-2xl">
            <div class="border-b border-gray-200 p-4 flex justify-between items-center">
                <h3 class="font-semibold text-gray-800">Registrar Pagamento</h3>
                <button onclick="closePaymentModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="payment-form" class="p-4 space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Empréstimo *</label>
                        <select id="payment-loan" required class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Selecione um empréstimo</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Data do Pagamento *</label>
                        <input type="date" id="payment-date" required class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Valor do Pagamento *</label>
                        <input type="number" id="payment-amount" required step="0.01" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="R$ 0,00">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de Pagamento</label>
                        <select id="payment-type" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="partial">Parcial</option>
                            <option value="full">Total</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Observações</label>
                    <textarea id="payment-notes" rows="3" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Observações sobre o pagamento..."></textarea>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg">
                    <div class="flex justify-between items-center">
                        <span class="font-medium text-blue-800">Valor Restante:</span>
                        <span class="text-2xl font-bold text-blue-600" id="payment-remaining">R$ 0,00</span>
                    </div>
                </div>
                <div class="pt-2 flex space-x-3">
                    <button type="submit" class="flex-1 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition">
                        Registrar Pagamento
                    </button>
                    <button type="button" onclick="closePaymentModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Installment Edit Modal -->
    <div id="installment-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg w-full max-w-2xl">
            <div class="border-b border-gray-200 p-4 flex justify-between items-center">
                <h3 class="font-semibold text-gray-800">Editar Parcela</h3>
                <button onclick="closeInstallmentModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="installment-form" class="p-4 space-y-4">
                <input type="hidden" id="installment-loan-id">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Cliente</label>
                        <input type="text" id="installment-client-name" readonly class="w-full border rounded-lg p-2 bg-gray-50">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Valor Original</label>
                        <input type="text" id="installment-original-amount" readonly class="w-full border rounded-lg p-2 bg-gray-50">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Valor Restante *</label>
                        <input type="number" id="installment-remaining-amount" required step="0.01" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nova Data de Vencimento</label>
                        <input type="date" id="installment-new-due-date" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nova Taxa de Juros (%)</label>
                        <input type="number" id="installment-new-rate" step="0.01" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                        <select id="installment-status" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="active">Ativo</option>
                            <option value="paid">Pago</option>
                            <option value="overdue">Vencido</option>
                            <option value="cancelled">Cancelado</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Observações</label>
                    <textarea id="installment-notes" rows="3" class="w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Observações sobre as alterações..."></textarea>
                </div>
                <div class="pt-2 flex space-x-3">
                    <button type="submit" class="flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition">
                        Salvar Alterações
                    </button>
                    <button type="button" onclick="closeInstallmentModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> 
